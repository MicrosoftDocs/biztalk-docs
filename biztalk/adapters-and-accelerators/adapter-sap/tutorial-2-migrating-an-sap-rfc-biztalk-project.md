---
title: "Tutorial 2: Migrating an SAP RFC BizTalk Project | Microsoft Docs"
ms.custom: ""
ms.date: "06/08/2017"
ms.prod: "biztalk-server"
ms.reviewer: ""

ms.suite: ""
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "migrating, BizTalk project from previous version of the SAP adapter"
  - "migration"
  - "migrating, SAP RFC BizTalk project"
ms.assetid: b4943613-23d2-4869-b033-ec07daabfac5
caps.latest.revision: 5
author: "MandiOhlinger"
ms.author: "mandia"
manager: "anneta"
---
# Tutorial 2: Migrating an SAP RFC BizTalk Project
The previous version of the SAP adapter that shipped with Microsoft BizTalk Server differs from the WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] in many aspects, including:  
  
- The design-time experience of creating a BizTalk project.  
  
- The metadata retrieval experience.  
  
- Schema file name and namespace.  
  
- Data type mappings.  
  
- The operations that can be performed using the adapter.  
  
- Physical port configuration in the BizTalk Server Administration console.  
  
  These differences are explained in the topics within [Migrating BizTalk Projects Created Using the Previous Version of the SAP Adapter](http://msdn.microsoft.com/library/a486bac9-8952-43fd-8099-413f1491de37).  
  
  However, you can make changes to the BizTalk project created using the previous version of the adapter and make it work with the WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].  
  
  This tutorial provides instructions on the changes you should make to the existing BizTalk project created using the previous version of the adapter.  
  
> [!NOTE]
>  In this tutorial, for the sake of brevity, the previous version of the SAP adapter will be referred to as vPrev SAP adapter. Similarly, a BizTalk project that uses the vPrev SAP adapter will be referred to as vPrev BizTalk project.  
  
## Sample Used for the Tutorial  
 This tutorial is based upon a sample (SAP_RFC_Migration) that demonstrates how to migrate a vPrev BizTalk project that invokes an RFC in an SAP system. The sample is provided with the [!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)]. For more information, see [Adapter Samples](../../adapters-and-accelerators/accelerator-rosettanet/adapter-samples.md).  
  
## Prerequisites  
  
-   You must have a vPrev BizTalk project. This tutorial involves a BizTalk project that invokes the SD_RFC_CUSTOMER_GET RFC.  
  
-   You must have a request message to perform to invoke the SD_RFC_CUSTOMER_GET RFC using the vPrev SAP adapter. The request message must conform to the schema of the RFC generated using the vPrev SAP adapter. The sample provided for this tutorial contains this request message.  
  
-   [Create strong-name key file, and learn the tools](../../adapters-and-accelerators/adapter-sap/prerequisites-to-create-sap-applications.md)
  
## Understanding a BizTalk Project Created Using the Previous Version of the Adapter  
 The key constituents of a vPrev BizTalk project to invoke an RFC are:  
  
-   **BizTalk orchestration**. This is a simple orchestration that picks request messages from a file location, sends the request message to the SAP system using an SAP send-receive port, receives the response, and saves it to another file location.  
  
-   **Schema for the RFC you want to invoke in the SAP system**. This tutorial involves a BizTalk project that invokes the SD_RFC_CUSTOMER_GET RFC. The schema generated for the RFC is SD_RFC_CUSTOMER_GET__x32003.xsd. This schema is generated using the vPrev SAP adapter.  
  
-   **Request message**. The request message to invoke the SD_RFC_CUSTOMER_GET RFC. The schema of the request message conforms to the schema of the SD_RFC_CUSTOMER_GET RFC as surfaced by the vPrev SAP adapter.  
  
## How to Migrate a BizTalk Project Created Using the Previous Version of the Adapter  
 The goal of this migration tutorial is to enable you to send a request message, which conforms to schema generated by the vPrev SAP adapter, using a WCF-Custom port that can only process messages conforming to the WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]. So, in short, the migration exercise involves configuring the WCF-Custom port to process messages that do not conform to the WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]'s schema.  
  
 However, to be able to configure the WCF-Custom port appropriately, you must perform the following tasks:  
  
- Generate metadata for the SD_RFC_CUSTOMER_GET RFC using the WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].  
  
- Map the request message for invoking the RFC using the vPrev SAP adapter to a request message for invoking the RFC using the WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].  
  
- Map the response message received using the WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] to the response message for the vPrev SAP adapter.  
  
- Create a WCF-Custom SAP send-receive port in the BizTalk Server Administration console.  
  
- Configure the WCF-Custom port to use the request and response mappings.  
  
## In This Section  
  
-   [Step 1: Modify the vPrev BizTalk Project for Invoking an RFC](../../adapters-and-accelerators/adapter-sap/step-1-modify-the-vprev-biztalk-project-for-invoking-an-rfc.md)  
  
-   [Step 2: Configure the Orchestration in BizTalk Server Administration Console](../../adapters-and-accelerators/adapter-sap/step-2-configure-the-orchestration-in-biztalk-server-administration-console1.md)  
  
-   [Step 3: Test the Migrated Application](../../adapters-and-accelerators/adapter-sap/step-3-test-the-migrated-application6.md)  
  
## See Also  
 [SAP Adapter Tutorials](../../adapters-and-accelerators/adapter-sap/sap-adapter-tutorials.md)